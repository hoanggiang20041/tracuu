# HÆ°á»›ng dáº«n sá»­ dá»¥ng chá»©c nÄƒng Tab YÃªu cáº§u Gia háº¡n

## Tá»•ng quan

Há»‡ thá»‘ng quáº£n lÃ½ yÃªu cáº§u gia háº¡n Ä‘Ã£ Ä‘Æ°á»£c cáº£i thiá»‡n vá»›i giao diá»‡n tab Ä‘á»ƒ chia yÃªu cáº§u thÃ nh 3 nhÃ³m rÃµ rÃ ng: **ChÆ°a duyá»‡t**, **ÄÃ£ duyá»‡t**, vÃ  **Tá»« chá»‘i**.

## CÃ¡c tÃ­nh nÄƒng má»›i

### 1. Giao diá»‡n Tab
- **3 tab chÃ­nh**: ChÆ°a duyá»‡t, ÄÃ£ duyá»‡t, Tá»« chá»‘i
- **Badge Ä‘áº¿m sá»‘**: Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng yÃªu cáº§u trong má»—i tab
- **Chuyá»ƒn Ä‘á»•i mÆ°á»£t mÃ **: Click Ä‘á»ƒ chuyá»ƒn giá»¯a cÃ¡c tab
- **URL bookmarking**: LÆ°u tráº¡ng thÃ¡i tab trong URL

### 2. Tab "ChÆ°a duyá»‡t" (Pending)
- **Hiá»ƒn thá»‹**: Táº¥t cáº£ yÃªu cáº§u chá» xá»­ lÃ½
- **Thao tÃ¡c**: Xem, Duyá»‡t, Tá»« chá»‘i
- **ThÃ´ng tin**: ID khÃ¡ch, tÃªn, sá»‘ ngÃ y, sá»‘ tiá»n, thá»i gian táº¡o
- **Action buttons**:
  - ğŸ‘ï¸ **Xem phiáº¿u báº£o hÃ nh**: Hiá»ƒn thá»‹ chi tiáº¿t phiáº¿u báº£o hÃ nh cá»§a khÃ¡ch
  - âœ… **Duyá»‡t**: Duyá»‡t yÃªu cáº§u vÃ  cá»™ng ngÃ y báº£o hÃ nh
  - âŒ **Tá»« chá»‘i**: Tá»« chá»‘i yÃªu cáº§u gia háº¡n

### 3. Tab "ÄÃ£ duyá»‡t" (Approved)
- **Hiá»ƒn thá»‹**: Táº¥t cáº£ yÃªu cáº§u Ä‘Ã£ Ä‘Æ°á»£c duyá»‡t
- **ThÃ´ng tin**: ID khÃ¡ch, tÃªn, sá»‘ ngÃ y, sá»‘ tiá»n, thá»i gian duyá»‡t
- **Káº¿t quáº£**: Sá»‘ phiáº¿u báº£o hÃ nh Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t
- **Tráº¡ng thÃ¡i**: âœ… ÄÃ£ duyá»‡t vá»›i thÃ´ng tin chi tiáº¿t

### 4. Tab "Tá»« chá»‘i" (Rejected)
- **Hiá»ƒn thá»‹**: Táº¥t cáº£ yÃªu cáº§u Ä‘Ã£ bá»‹ tá»« chá»‘i
- **ThÃ´ng tin**: ID khÃ¡ch, tÃªn, sá»‘ ngÃ y, sá»‘ tiá»n, thá»i gian tá»« chá»‘i
- **Tráº¡ng thÃ¡i**: âŒ ÄÃ£ tá»« chá»‘i

## CÃ¡ch sá»­ dá»¥ng

### 1. Xem danh sÃ¡ch yÃªu cáº§u
1. VÃ o trang `admin.html`
2. Chá»n tab "YÃªu cáº§u gia háº¡n"
3. Máº·c Ä‘á»‹nh hiá»ƒn thá»‹ tab "ChÆ°a duyá»‡t"
4. Click vÃ o tab khÃ¡c Ä‘á»ƒ xem yÃªu cáº§u Ä‘Ã£ xá»­ lÃ½

### 2. Duyá»‡t yÃªu cáº§u gia háº¡n
1. á» tab "ChÆ°a duyá»‡t", tÃ¬m yÃªu cáº§u cáº§n duyá»‡t
2. Click **ğŸ‘ï¸** Ä‘á»ƒ xem phiáº¿u báº£o hÃ nh cá»§a khÃ¡ch
3. Click **âœ…** Ä‘á»ƒ duyá»‡t yÃªu cáº§u
4. Há»‡ thá»‘ng sáº½:
   - Tá»± Ä‘á»™ng cá»™ng ngÃ y cho Táº¤T Cáº¢ phiáº¿u báº£o hÃ nh cá»§a khÃ¡ch
   - Chuyá»ƒn sang tab "ÄÃ£ duyá»‡t" Ä‘á»ƒ hiá»ƒn thá»‹ káº¿t quáº£
   - Hiá»ƒn thá»‹ thÃ´ng bÃ¡o thÃ nh cÃ´ng

### 3. Tá»« chá»‘i yÃªu cáº§u gia háº¡n
1. á» tab "ChÆ°a duyá»‡t", tÃ¬m yÃªu cáº§u cáº§n tá»« chá»‘i
2. Click **âŒ** Ä‘á»ƒ tá»« chá»‘i yÃªu cáº§u
3. XÃ¡c nháº­n trong dialog
4. Há»‡ thá»‘ng sáº½:
   - ÄÃ¡nh dáº¥u yÃªu cáº§u lÃ  "Tá»« chá»‘i"
   - Chuyá»ƒn sang tab "Tá»« chá»‘i" Ä‘á»ƒ hiá»ƒn thá»‹ káº¿t quáº£
   - Hiá»ƒn thá»‹ thÃ´ng bÃ¡o tá»« chá»‘i

### 4. Theo dÃµi káº¿t quáº£
- **Tab "ÄÃ£ duyá»‡t"**: Xem táº¥t cáº£ yÃªu cáº§u Ä‘Ã£ Ä‘Æ°á»£c xá»­ lÃ½ thÃ nh cÃ´ng
- **Tab "Tá»« chá»‘i"**: Xem táº¥t cáº£ yÃªu cáº§u Ä‘Ã£ bá»‹ tá»« chá»‘i
- **Badge Ä‘áº¿m sá»‘**: Theo dÃµi sá»‘ lÆ°á»£ng yÃªu cáº§u trong má»—i tráº¡ng thÃ¡i

## Cáº£i tiáº¿n ká»¹ thuáº­t

### 1. Cáº¥u trÃºc HTML má»›i
```html
<!-- Renewal Tabs -->
<div class="renewal-tabs">
    <button class="renewal-tab-btn active" onclick="switchRenewalTab('pending')">
        <i class="fas fa-clock"></i> ChÆ°a duyá»‡t <span class="badge badge-warning">0</span>
    </button>
    <button class="renewal-tab-btn" onclick="switchRenewalTab('approved')">
        <i class="fas fa-check-circle"></i> ÄÃ£ duyá»‡t <span class="badge badge-success">0</span>
    </button>
    <button class="renewal-tab-btn" onclick="switchRenewalTab('rejected')">
        <i class="fas fa-times-circle"></i> Tá»« chá»‘i <span class="badge badge-danger">0</span>
    </button>
</div>
```

### 2. JavaScript Functions má»›i
- `switchRenewalTab(type)`: Chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c tab
- `updateRenewalTabCounts(counts)`: Cáº­p nháº­t sá»‘ Ä‘áº¿m trÃªn badge
- `renderRenewalSection(type, renewals)`: Render tá»«ng section riÃªng biá»‡t
- `initializeRenewalTabs()`: Khá»Ÿi táº¡o tab system

### 3. CSS Styling
- **Tab buttons**: Thiáº¿t káº¿ Ä‘áº¹p máº¯t vá»›i hover effects
- **Active state**: Highlight tab Ä‘ang Ä‘Æ°á»£c chá»n
- **Badge styling**: Badge Ä‘áº¿m sá»‘ vá»›i mÃ u sáº¯c phÃ¹ há»£p
- **Responsive**: TÆ°Æ¡ng thÃ­ch vá»›i mobile

## Lá»£i Ã­ch

### 1. Quáº£n lÃ½ dá»… dÃ ng hÆ¡n
- **TÃ¡ch biá»‡t rÃµ rÃ ng**: ChÆ°a duyá»‡t vs ÄÃ£ duyá»‡t
- **Táº­p trung xá»­ lÃ½**: Chá»‰ hiá»ƒn thá»‹ yÃªu cáº§u cáº§n xá»­ lÃ½
- **Theo dÃµi lá»‹ch sá»­**: Xem láº¡i cÃ¡c yÃªu cáº§u Ä‘Ã£ xá»­ lÃ½

### 2. UX tá»‘t hÆ¡n
- **Badge Ä‘áº¿m sá»‘**: Biáº¿t ngay cÃ³ bao nhiÃªu yÃªu cáº§u chá» xá»­ lÃ½
- **Chuyá»ƒn Ä‘á»•i mÆ°á»£t mÃ **: KhÃ´ng cáº§n reload trang
- **URL bookmarking**: CÃ³ thá»ƒ bookmark tab cá»¥ thá»ƒ

### 3. Workflow hiá»‡u quáº£
- **Tá»± Ä‘á»™ng chuyá»ƒn tab**: Sau khi duyá»‡t/tá»« chá»‘i
- **ThÃ´ng tin chi tiáº¿t**: Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ thÃ´ng tin cáº§n thiáº¿t
- **Action buttons**: Thao tÃ¡c trá»±c tiáº¿p trÃªn tá»«ng yÃªu cáº§u

## Test vÃ  Debug

### 1. Sá»­ dá»¥ng Test Tool
- Má»Ÿ `test-renewal-tabs.html`
- Test chá»©c nÄƒng chuyá»ƒn Ä‘á»•i tab
- Test quy trÃ¬nh duyá»‡t/tá»« chá»‘i
- Test performance

### 2. Debug trong Console
```javascript
// Xem tráº¡ng thÃ¡i tab hiá»‡n táº¡i
console.log(currentTab);

// Chuyá»ƒn sang tab cá»¥ thá»ƒ
switchRenewalTab('approved');

// Xem sá»‘ lÆ°á»£ng yÃªu cáº§u theo tráº¡ng thÃ¡i
const counts = {
    pending: adminExtras.renewals.filter(r => r.status === 'pending').length,
    approved: adminExtras.renewals.filter(r => r.status === 'approved').length,
    rejected: adminExtras.renewals.filter(r => r.status === 'rejected').length
};
console.log(counts);
```

### 3. URL Hash Support
- `#renewals-pending`: Má»Ÿ tab "ChÆ°a duyá»‡t"
- `#renewals-approved`: Má»Ÿ tab "ÄÃ£ duyá»‡t"  
- `#renewals-rejected`: Má»Ÿ tab "Tá»« chá»‘i"

## Cáº¥u trÃºc dá»¯ liá»‡u

### Renewal Request vá»›i thÃ´ng tin má»›i
```json
{
  "id": "KH001",
  "name": "Nguyá»…n VÄƒn An",
  "days": 30,
  "amount": 200000,
  "content": "Gia háº¡n báº£o hÃ nh 30 ngÃ y",
  "billUrl": "https://example.com/bill.jpg",
  "status": "pending|approved|rejected",
  "createdAt": 1234567890,
  "approvedAt": 1234567890,      // Thá»i gian duyá»‡t
  "rejectedAt": 1234567890,      // Thá»i gian tá»« chá»‘i
  "updatedWarranties": 2         // Sá»‘ phiáº¿u Ä‘Æ°á»£c cáº­p nháº­t
}
```

## LÆ°u Ã½ quan trá»ng

### 1. TÆ°Æ¡ng thÃ­ch ngÆ°á»£c
- **Dá»¯ liá»‡u cÅ©**: Váº«n hoáº¡t Ä‘á»™ng vá»›i yÃªu cáº§u khÃ´ng cÃ³ `approvedAt`/`rejectedAt`
- **Default status**: YÃªu cáº§u khÃ´ng cÃ³ status sáº½ Ä‘Æ°á»£c coi lÃ  "pending"

### 2. Performance
- **Lazy rendering**: Chá»‰ render tab Ä‘ang hiá»ƒn thá»‹
- **Efficient filtering**: Filter data má»™t láº§n, render nhiá»u láº§n
- **Memory management**: KhÃ´ng lÆ°u trá»¯ DOM elements khÃ´ng cáº§n thiáº¿t

### 3. Accessibility
- **Keyboard navigation**: CÃ³ thá»ƒ dÃ¹ng phÃ­m Ä‘á»ƒ chuyá»ƒn tab
- **Screen reader**: Há»— trá»£ Ä‘á»c mÃ n hÃ¬nh
- **Focus management**: Focus Ä‘Æ°á»£c quáº£n lÃ½ Ä‘Ãºng cÃ¡ch

## Káº¿t luáº­n

Chá»©c nÄƒng **"trong yÃªu cáº§u gia háº¡n chia ra lÃ  chÆ°a duyá»‡t vÃ  Ä‘Ã£ duyá»‡t"** Ä‘Ã£ Ä‘Æ°á»£c triá»ƒn khai hoÃ n chá»‰nh vá»›i:

- âœ… **3 tab riÃªng biá»‡t**: ChÆ°a duyá»‡t, ÄÃ£ duyá»‡t, Tá»« chá»‘i
- âœ… **Badge Ä‘áº¿m sá»‘**: Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng yÃªu cáº§u trong má»—i tab
- âœ… **Chuyá»ƒn Ä‘á»•i mÆ°á»£t mÃ **: Click Ä‘á»ƒ chuyá»ƒn giá»¯a cÃ¡c tab
- âœ… **Tá»± Ä‘á»™ng chuyá»ƒn tab**: Sau khi duyá»‡t/tá»« chá»‘i
- âœ… **URL bookmarking**: LÆ°u tráº¡ng thÃ¡i tab trong URL
- âœ… **UI/UX cáº£i thiá»‡n**: Giao diá»‡n Ä‘áº¹p vÃ  dá»… sá»­ dá»¥ng
- âœ… **Test tools**: CÃ´ng cá»¥ test toÃ n diá»‡n

Há»‡ thá»‘ng bÃ¢y giá» giÃºp admin quáº£n lÃ½ yÃªu cáº§u gia háº¡n má»™t cÃ¡ch hiá»‡u quáº£ vÃ  trá»±c quan hÆ¡n ráº¥t nhiá»u.
